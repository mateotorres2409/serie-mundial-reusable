on:
    workflow_call:
        inputs:
            environment:
                required: true
                type: string
            name:
                required: true
                type: string  
            version_other:
                required: false
                type: string
                default: main
        secrets:
            gh_pat:
                required: true
            apellido:
                required: true
jobs:
    greetings:
        name: greetings
        runs-on: ubuntu-latest
        environment: ${{ inputs.environment }}
        steps:
        - name: checkout_current
          uses: actions/checkout@v4
          with:
            path: current        
        - name: checkout_other
          uses: actions/checkout@v4
          with:
            repository: mateotorres2409/tribus-dav
            ref: ${{ inputs.version_other }}
            token: ${{ secrets.gh_pat }}
            path: other
        - name: list
          run: |
            ls -ltra current
            ls -ltra other
        - name: print
          run: |
            echo "Hello ${{ inputs.name }} ${{ secrets.apellido }}, you are in the ${{ vars.env_text }} environment."
